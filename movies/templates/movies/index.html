{% extends 'base.html' %}

{% block container %}
{% comment %} superuser에 한해서 영화 등록, 수정, 삭제가 이루어져야 한다는 것 반영 {% endcomment %}
{% if request.user.is_superuser  %}
<a href="{% url 'movies:getmovies' %}">영화정보 받기(관리자 전용 버튼)</a> 
{% endif %}
{% comment %} 수정, 삭제까지는 어떻게 구현해야? {% endcomment %}

{% if request.user.is_authenticated %}
    <p>로그인 됨</p>


    <div id="app">
        <select v-model="selected">
            <option v-for="option in options" v-bind:value="option.value">
                [[ option.text ]]
            </option>
        </select>
        {% comment %} <span>Selected: [[ selected ]]</span> {% endcomment %}
        <a :href="`movieby_genre/${selected}`"> [장르 선택 완료!] </a>
        <hr>
    </div> 


    {% if genres_length == 3%}
        <ul>
        {% for buk in bucket %}
            {% for movie in buk %}
                {% if movie in movies %}
                    {{ pass }}
                {% else %}
                    <p>{{ movie }}</p>
                {% endif %}
            {% endfor %}
            <li class='row mb-1'>
               
                {% for movie in buk %}
                    {% if movie in movies %}
                        <div class='card col-2'>
                        <a href=" {% url 'movies:detail' movie.pk %}  ">
                        {{movie.movieNm}}
                        <br>
                        <img src="{{ movie.poster_url }}" alt="사진">
                        </a>
                        </div>
                    {% endif %}
                {% endfor %}
            </li>
        {% endfor %}
        </ul>
    
    {% endif %}
    
    
{% else %}
    <p>로그인하세요</p>
{% endif %}


<script>
    new Vue({
    delimiters: ['[[', ']]'],
    el: '#app',
    data: {
        selected: '16',
        options: [
        { text: '애니메이션', value: '1' },
        { text: '범죄', value: '2' },
        { text: '드라마', value: '3' },
        { text: '액션', value: '4' },
        { text: '어드벤처', value: '5' },
        { text: 'SF', value: '6' },
        { text: '스릴러', value: '7' },
        { text: '판타지', value: '8' },
        { text: '멜로/로맨스', value: '9' },
        { text: '코미디', value: '10' },
        { text: '공포(호러)', value: '11' },
        { text: '가족', value: '12' },
        { text: '전쟁', value: '13' },
        { text: '미스터리', value: '14' },
        { text: '사극', value: '15' },
        { text: '기타', value: '16' },
        { text: '다큐멘터리', value: '17' },
        { text: '뮤지컬', value: '18' },
        


        ],
    }
    })
</script>


{% endblock container %} 

