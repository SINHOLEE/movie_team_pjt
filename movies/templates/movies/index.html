{% extends 'base.html' %}

{% block container %}
{% comment %} superuser에 한해서 영화 등록, 수정, 삭제가 이루어져야 한다는 것 반영 {% endcomment %}
{% if request.user.is_superuser  %}
<a href="{% url 'movies:getmovies' %}">영화정보 받기(관리자 전용 버튼)</a> 
{% endif %}
{% comment %} 수정, 삭제까지는 어떻게 구현해야? {% endcomment %}
<div id="app">
{% if request.user.is_authenticated %}
    {% if genres_length == 3%}
        <ul>
        {% for buk in bucket %}
            {% for movie in buk %}
                {% if movie in movies %}
                    {{ pass }}
                {% else %}
                    <p>{{ movie }}</p>
                {% endif %}
            {% endfor %}
            <li class='row mb-1'>
               
                {% for movie in buk %}
                    {% if movie in movies %}
                        <div class='card col-2'>
                        <a href=" {% url 'movies:detail' movie.pk %}  ">
                        {{movie.movieNm}}
                        <br>
                        <img src="{{ movie.poster_url }}" alt="사진">
                        </a>
                        </div>
                    {% endif %}
                {% endfor %}
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <P>선호하는 장르를 선택해 주세요 꼭! 3가지 종류를 선택하시고, 중복선택을 지양해 주세요</P>

        <form action="{% url 'movies:get_like_genres' %}" method="POST" >
        {% csrf_token %}
        <div class="row form-group mb-1">
            {% for i in priorities %}
            <div class='card col-4 '>
                <label for="exampleFormControlSelect1">{{ i }}번째 선호 장르</label>
                <select class="form-control" name="genre{{i}}" id="exampleFormControlSelect1">
                    <option value="">선택</option>
                    {% for genreA in genres_all %}
                        <option value="{{ genreA }} ">{{ genreA }}</option>
                    {% endfor %}
                </select>
            </div>
            {% endfor %}
        </div>
        <button type="submit" class="btn btn-primary">등록</button>
        </form>
    {% endif %}
    
{% endif %}
    

</div>
<script>
    const app = new Vue({
        delimiters: ['[[', ']]'],
        el: '#app',
        data: {
            message: '1123',
            genres: [],
        }
        computed: {
        }
    })
</script>
{% endblock container %} 
